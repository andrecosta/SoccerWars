<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>[ SoccerWars ] Game</title>

    <!-- Styles -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.0.1/sweetalert.min.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">

    <!-- Vue Framework components -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/vue/0.12.6/vue.min.js"></script>
    <script src="js/plugins/vue-route.js"></script>

</head>
<body id="app">

    <section id="left" class="hologram">

        <div id="profile-picture" v-link="/profile">
            <img width="150" height="150" v-attr="src: user.avatar.big">
        </div>

        <div id="points">
            <span v-text="user.points" v-cloak></span>
        </div>

        <nav id="main-menu">
            <ul>
                <li v-link="/dashboard" class="menu-item glitch neon">
                    <span data-text="Dashboard">Dashboard</span><span class="menu-icon"></span>
                </li>
                <li v-link="/matches" class="menu-item glitch neon">
                    <span data-text="Matches">Matches</span><span class="menu-icon"></span>
                </li>
                <li v-link="/teams" class="menu-item glitch neon">
                    <span data-text="Teams">Teams</span><span class="menu-icon"></span>
                </li>
                <li v-link="/users" class="menu-item glitch neon">
                    <span data-text="Users">Users</span><span class="menu-icon"></span>
                </li>
                <li v-link="/corporations" class="menu-item glitch neon">
                    <span data-text="Corporations">Corporations</span><span class="menu-icon"></span>
                </li>
                <li v-link="/market" class="menu-item glitch neon">
                    <span data-text="Market">Market</span><span class="menu-icon"></span>
                </li>
            </ul>
        </nav>

        <button id="#logout" v-on="click: logout">Logout</button>

    </section><!-- /#left -->

    <section id="middle" class="hologram">

        <header id="frame">
            <h1 class="scramble" v-text="title"></h1>
            <div class="buttons">
                <div v-on="click: maximize" v-show="!isMaximized">+</div>
                <div v-on="click: minimize" v-show="isMaximized">-</div>
            </div>
        </header>

        <main id="main">
            <router-view></router-view>
        </main>

    </section><!-- /#middle -->

    <section id="right" class="hologram">

        My bets

    </section><!-- /#right -->

    <!-- Dashboard template -->
    <template id="dashboard">
        <div class="loading" v-show="!loaded"><span>Loading...</span></div>
        <div class="content" v-show="loaded">
            <h2>Recent activity and stuff</h2>
        </div>
    </template>

    <!-- Matches template -->
    <template id="matches">
        <div class="loading" v-show="!loaded"><span>Loading...</span></div>
        <div class="content" v-show="loaded">
            <div class="top">
                <h2>Live matches</h2>
                <div v-repeat="matches">
                    <span v-text="team_1.name"></span>
                    <div v-text="team_2.name"></div>
                    <div v-text="start_time"></div>
                    <div v-text="end_time"></div>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <h2>Upcoming matches</h2>
                    <div v-repeat="matches">
                        Team 1:<div v-text="team_1.name"></div>
                        Team 2: <div v-text="team_2.name"></div>
                        Start: <div v-text="start_time"></div>
                    </div>
                </div>

                <div class="column">
                    <h2>Past matches</h2>
                    <div v-repeat="matches">
                        Team 1: <div v-text="team_1.name"></div>
                        Team 2: <div v-text="team_2.name"></div>
                        End: <div v-text="end_time"></div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Teams template -->
    <template id="teams">
        <div class="loading" v-show="!loaded"><span>Loading...</span></div>
        <div class="content" v-show="loaded">
            <div class="top">
                <h2>Teams list</h2>
                <div v-repeat="teams">
                    <span v-text="name"></span>
                    <div v-text="rank"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Users template -->
    <template id="users">
        <div class="loading" v-show="!loaded"><span>Loading...</span></div>
        <div class="content" v-show="loaded">
            <div class="top">
                <h2>User list</h2>
                <div v-repeat="users">
                    <img v-attr="src: avatar.small"><span v-text="name"></span>
                </div>
            </div>
        </div>
    </template>

    <!-- Extra plugins -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lettering.js/0.7.0/jquery.lettering.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.2/velocity.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Cookies.js/1.2.1/cookies.min.js"></script>
    <script src="js/plugins/jquery.neon.min.js"></script>
    <script src="js/plugins/sweetalert-dev.js"></script>

    <!-- Main application scripts & components -->
    <script src="js/effects.js"></script>
    <script src="js/app.js"></script>
    <script src="js/components/dashboard.js"></script>
    <script src="js/components/matches.js"></script>
    <script src="js/components/teams.js"></script>
    <script src="js/components/users.js"></script>
    <script src="js/routes.js"></script>

    <!--
    <header>
        <nav id="top-menu">
            <ul>
                <?php if (!isset($_SESSION['uid'])) { ?>
                    <li><a href="/#register">Create Account</a></li>
                    <li><a href="/#login">Login</a></li>
                <?php } else { ?>
                    <li><a href="#">My Profile (<?=$_SESSION["username"]?>)</a></li>
                    <li><a href="logout.php">Logout</a></li>
                <?php } ?>
            </ul>
        </nav>

    </header>

    <main>

    <section class="wide">
        <div class="title"><span class="live"></span> Live Matches</div>
        <div class="content">
            <?php
            $matches = mysqli_query($connection, "SELECT * FROM `Match` WHERE StartTime < NOW() AND NOW() < EndTime");
            while ($match = mysqli_fetch_array($matches)) {
                $teams = mysqli_query($connection, "SELECT * FROM Team, MatchProgress WHERE MatchID = $match[ID] AND Team.ID = MatchProgress.TeamID GROUP BY Name");
                $team_details = [];
                while ($team_details[] = mysqli_fetch_array($teams));
                ?>
                <div class="match">
                    <div><span class="label green">! IN PROGRESS !</span></div>
                    <span class="score"><?=$team_details[0]["Goals"]?></span>
                    <span class="label cyan">SCORE</span>
                    <span class="score"><?=$team_details[1]["Goals"]?></span>
                    <div class="teams">
                        <div class="left-team"><?=$team_details[0]["Name"]?></div>
                        <span class="vs">[VS]</span>
                        <?=$team_details[1]["Name"]?></div>
                </div>
            <?php } ?>
        </div>
    </section>

    <section class="regular">
        <div class="title">Upcoming Matches</div>
        <div class="content">
            <?php
            $matches = mysqli_query($connection, "SELECT * FROM `Match` WHERE StartTime > NOW()");
            while ($match = mysqli_fetch_array($matches)) {
                $teams = mysqli_query($connection, "SELECT * FROM Team, MatchProgress WHERE MatchID = $match[ID] AND Team.ID = MatchProgress.TeamID GROUP BY Name");
                $team_details = [];
                while ($team_details[] = mysqli_fetch_array($teams));
                ?>
                <div class="match">
                    <div><span class="label green">STARTING ON</span> <span class="time"><?=$match["StartTime"]?></span></div>
                    <div class="teams">
                        <div class="left-team"><?=$team_details[0]["Name"]?></div>
                        <span class="vs">[VS]</span>
                        <?=$team_details[1]["Name"]?></div>
                </div>
            <?php } ?>
        </div>
    </section>

    <section class="regular">
        <div class="title">Past Matches</div>
        <div class="content">
            <?php
            $matches = mysqli_query($connection, "SELECT * FROM `Match` WHERE EndTime < NOW()");
            while ($match = mysqli_fetch_array($matches)) {
                $teams = mysqli_query($connection, "SELECT * FROM Team, MatchProgress WHERE MatchID = $match[ID] AND Team.ID = MatchProgress.TeamID GROUP BY Name");
                $team_details = [];
                while ($team_details[] = mysqli_fetch_array($teams));
                ?>
                <div class="match">
                    <div><span class="label red">ENDED</span> <span class="time"><?=$match["StartTime"]?></span></div>
                    <span class="score"><?=$team_details[0]["Goals"]?></span>
                    <span class="label cyan">SCORE</span>
                    <span class="score"><?=$team_details[1]["Goals"]?></span>
                    <div class="teams">
                        <div class="left-team"><?=$team_details[0]["Name"]?></div>
                        <span class="vs">[VS]</span>
                        <?=$team_details[1]["Name"]?></div>
                </div>
            <?php } ?>
        </div>
    </section>

    </main>
    -->

</body>
</html>